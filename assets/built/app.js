var t,e;function s(t){document.documentElement.setAttribute("data-color-pref",t),localStorage.setItem("pref",t)}async function o(){const t=window.location.href;await navigator.clipboard.writeText(t),document.querySelectorAll(".sm-copy-button").forEach((t=>{t.classList.toggle("sm-copy-button--copied"),setTimeout((()=>{t.classList.toggle("sm-copy-button--copied")}),3e3)}))}(t=self.document)&&!t.getElementById("livereloadscript")&&((e=t.createElement("script")).async=1,e.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",e.id="livereloadscript",t.getElementsByTagName("head")[0].appendChild(e));class a{constructor(t){this.id=t&&t.dataset.id||null,this.title=t&&t.dataset.title||null,this.items=()=>a.makeArray(JSON.parse(localStorage.getItem("saves"))),this.int=null}generateItem(){return{id:this.id,title:this.title,timestamp:new Date,scrollPos:this.scrollStatus().scrollPos,progress:this.scrollStatus().progress}}save(){localStorage.setItem("saves",JSON.stringify([this.generateItem(),...this.items()])),this.populateSavesMenu(),this.updateScrollPosition();document.querySelectorAll(`button[data-id=${this.id}]`).forEach((t=>{t.classList.add("sm-love-toggle")}))}remove(){const t=[...this.items()],e=t.findIndex((t=>this.id===t.id));t.splice(e,1),localStorage.removeItem("saves"),t.length&&localStorage.setItem("saves",JSON.stringify(t)),this.int=null,this.populateSavesMenu();document.querySelectorAll(`button[data-id=${this.id}]`).forEach((t=>{t.classList.remove("sm-love-toggle")}))}static makeArray(t){return t?t.length?t:[t]:[]}scrollStatus(){return this.isCurrentPageSaved()<0?{scrollPos:null,progress:null}:{scrollPos:window.scrollY,progress:Math.round(window.scrollY/(document.body.scrollHeight-document.body.clientHeight)*100)}}identifySaves(){this.items()&&this.items().forEach((t=>{const{id:e}=t,s=document.querySelectorAll(`button[data-id=${e}]`);s&&s.forEach((t=>t.classList.add("sm-love-toggle")))}))}isCurrentPageSaved(){const t=window.location.pathname.replace(/\//g,"");return this.items().findIndex((e=>e.id===t))}step(){const t=this.isCurrentPageSaved();if(t<0)return;const e=this.items();e[t].progress=this.scrollStatus().progress,e[t].scrollPos=this.scrollStatus().scrollPos,localStorage.removeItem("saves"),localStorage.setItem("saves",JSON.stringify(e)),this.populateSavesMenu(),setTimeout((()=>{window.requestAnimationFrame(this.step.bind(this))}),1e3)}updateScrollPosition(){if(!this.items().length)return;this.isCurrentPageSaved()<0||window.requestAnimationFrame(this.step.bind(this))}scrollToPos(){if(this.isCurrentPageSaved()>-1){const t=this.items();window.scrollTo({top:t[this.isCurrentPageSaved()].scrollPos,behavior:"smooth"})}}renderSavesMenu(){return this.items().map((t=>`<div class="sm-saves" style="background-image: linear-gradient(to right, hsla(\n          var(--primary-h) var(--saturation) var(--lightness) / ${t.progress?.35:.15}\n        ) ${t.progress?t.progress-10:50}%, hsla(\n          var(--primary-h) var(--saturation) var(--lightness) / 0.15\n        ) ${t.progress?t.progress+10:50}%">\n            <div class="sm-saves-meta">\n                <div>\n                    <p class="sm-saves-title"><a href="/${t.id}">${t.title}</a></p>\n                    <p class="sm-saves-date">Saved on ${(new Intl.DateTimeFormat).format(new Date(t.timestamp))}</p>\n                </div>\n                <button class="sm-circle-icon-button sm-love-button sm-love-toggle" data-id="${t.id}" data-title="${t.title}" aria-label="Remove ${t.title} from favorites">\n                <svg class="sm-heart-outline-icon"><use href="#sm-heart-outline-icon"></use></svg>\n                <svg class="sm-heart-fill-icon"><use href="#sm-heart-fill-icon"></use></svg>\n                </button>\n            </div>\n        </div>`)).join("")}populateSavesMenu(){const t=document.querySelector(".sm-overflow-articles");if(this.items().length)t.innerHTML=this.renderSavesMenu();else{const e="<p>No articles saved yet. Hit the heart to get started!</p>";t.innerHTML=e}}init(){this.identifySaves(),this.populateSavesMenu(),this.scrollToPos(),this.updateScrollPosition()}}function i(t){t.target.closest(".sm-navbar-menu-button")&&document.querySelector(".sm-nav-menu-container").classList.add("sm-show-menu"),t.target.closest(".sm-love-button")?function(t){const e=new a(t),s=e.items();if(!s.length)return void e.save();const{id:o}=e;s.find((t=>t.id===o))?e.remove():e.save()}(t.target.closest(".sm-love-button")):(t.target.closest(".sm-nav-menu-close-button")&&document.querySelector(".sm-nav-menu-container").classList.remove("sm-show-menu"),t.target.closest(".sm-copy-button")?o(t.target.closest(".sm-copy-button")):t.target.closest(".sm-dark-mode")?s("dark"):t.target.closest(".sm-light-mode")?s("light"):(t.target.closest(".sm-saves-button")||t.target.closest(".sm-navbar-close-saves"))&&document.querySelector(".sm-navbar-saves").classList.toggle("sm-show-saves"))}function n(t){"Escape"===t.code&&document.querySelector("[class*=show]")}function r(t,e,s){const o="previous"===e?"left":"right",a="previous"===e?"sm-prev":"sm-next",i=t?document.createElement("a"):document.createElement("span");i.innerHTML=`<svg aria-hidden="true"><use href="#sm-${o}-arrow-icon"></use></svg>`,i.classList.add("sm-circle-icon-button",a),t?(i.setAttribute("aria-label",`${e} posts`),i.setAttribute("href",t)):i.classList.add("sm-circle-icon-button","sm-nav-disabled"),s.append(i)}document.body.addEventListener("click",i),function(){const t=document.querySelectorAll(".sm-dark-mode, .sm-light-mode");window.CSS&&CSS.supports("color","var(--primary)")||t.forEach((t=>{t.style.display="none"}))}(),function(){const t=document.querySelector(".sm-pagination");if(!t)return;const e=function(t){return/page/.test(t)?t.split("page")[0]:t}(window.location.pathname),{page:s,prev:o,next:a,pages:i}=t.dataset;r(o,"previous",t);const n=s-2>0?s-2:1;for(let o=n-1;o<Math.min(n+4,+i);o+=1){let a;a=0===o&&"/"===e?"/":0===o&&"/"!==e?e:`${e}page/${o+1}/`;const i=document.createElement("div");i.classList.add("sm-pagination-item");const n=document.createElement("a");n.setAttribute("href",a),n.textContent=o+1,+s===o+1&&i.classList.add("sm-current"),i.append(n),t.append(i)}r(a,"next",t)}(),document.body.addEventListener("keyup",n),(new a).init();
//# sourceMappingURL=app.js.map
