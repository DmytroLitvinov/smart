{{!< default}}
{{!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template --}}

{{#post}}

{{!-- Post Header  --}}
<header class="{{^if feature_image}}post__no-img">{{else}}post__img">
    <img srcset="{{img_url feature_image size="s"}} 300w,
                 {{img_url feature_image size="m"}} 600w,
                 {{img_url feature_image size="l"}} 1000w,
                 {{img_url feature_image size="xl"}} 2000w" sizes="100vw" src="{{img_url feature_image size="xl"}}"
        alt="{{title}}">
    {{/if}}
</header>
{{!-- Post Header  --}}

{{!-- Main  --}}
<main class="main" id="main">
    <div class="outer-container">
        <div class="inner-container">
            <article class="{{post_class}}">

                <header class="post__header">
                    <h1 class="post__title--serif underline">{{title}}</h1>
                </header>

                <div class="post__content">
                    {{content}}
                </div>
            </article>
        </div>
    </div>
</main>
{{!-- Main --}}

{{> "share"}}
{{/post}}

{{#contentFor "scripts"}}
<script>
    (function (window, document) {
        var resizeImagesInGalleries = function resizeImagesInGalleries() {
            var images = document.querySelectorAll('.kg-gallery-image img');
            images.forEach(function (image) {
                var container = image.closest('.kg-gallery-image');
                var width = image.attributes.width.value;
                var height = image.attributes.height.value;
                var ratio = width / height;
                container.style.flex = ratio + ' 1 0%';
            });
        };
        document.addEventListener('DOMContentLoaded', resizeImagesInGalleries);
    })(window, document);
</script>
{{/contentFor}}